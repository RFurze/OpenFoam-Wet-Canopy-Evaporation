#!/usr/bin/env gnuplot

CanopyMass2 = CanopyMass1 = 0

CanopyMass = "< grep 'CanopyMass:' log.buoyantBoussinesqSimpleFoam | awk '{print $3}' | tr -d ,"
shift(x) = (CanopyMass2 = CanopyMass1, CanopyMass1 = x)

set logscale y
set xlabel 'Iteration'
set ylabel 'Change of Moisture in Canopy [kg]'

plot CanopyMass using 0:(shift($1), $0 < 1 ? 1/0 : $1 - CanopyMass2)


pause(2)
reread
